{% extends "core/_base.html" %}
{% block title %}Tempo • Equipe Nabos{% endblock %}

{% block content %}

<!-- HEADER -->
<div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6">
  <div>
    <h1 class="text-3xl font-semibold tracking-tight">Tempo (Spots)</h1>
    <p class="text-zinc-400 text-sm mt-1">
      Escolha um spot para ver a previsão de pesca.
    </p>
  </div>

  <form method="get" class="w-full md:w-[360px]">
    <input
      name="q"
      value="{{ q }}"
      placeholder="Buscar spot..."
      class="w-full rounded-2xl border border-zinc-800 bg-zinc-950/40 px-4 py-3 text-sm
             outline-none focus:ring-2 focus:ring-zinc-600 focus:border-zinc-700">
  </form>
</div>

<section class="grid gap-3 grid-cols-2 sm:grid-cols-4 mb-6">
  <div class="rounded-2xl border border-zinc-800 bg-zinc-900/35 p-4">
    <div class="text-xs text-zinc-400">Resultados</div>
    <div class="mt-1 text-xl font-semibold">{{ spots|length }}</div>
  </div>
  <div class="rounded-2xl border border-zinc-800 bg-zinc-900/35 p-4">
    <div class="text-xs text-zinc-400">Busca</div>
    <div class="mt-1 text-sm text-zinc-200 truncate">
      {% if q %}“{{ q }}”{% else %}—{% endif %}
    </div>
  </div>
  <div class="rounded-2xl border border-zinc-800 bg-zinc-900/35 p-4">
    <div class="text-xs text-zinc-400">Cobertura</div>
    <div class="mt-1 text-sm text-zinc-200">Vento • Onda • Maré</div>
  </div>
  <div class="rounded-2xl border border-zinc-800 bg-zinc-900/35 p-4">
    <div class="text-xs text-zinc-400">Atualização</div>
    <div class="mt-1 text-sm text-zinc-200">Automática</div>
  </div>
</section>

<!-- GRID -->
<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
  {% for s in spots %}
    <a href="{% url 'spot_detail' s.slug %}"
       class="group rounded-2xl border border-zinc-800 bg-zinc-900/40 p-5
              hover:bg-zinc-900/70 transition">

      <!-- Nome -->
      <div class="text-lg font-semibold group-hover:text-white transition">
        {{ s.name }}
      </div>

      <!-- Local -->
      <div class="text-sm text-zinc-400 mt-1">
        {% if s.city %}{{ s.city }}{% endif %}{% if s.state %} • {{ s.state }}{% endif %}
      </div>

      <!-- Descrição -->
      <p class="text-sm text-zinc-300 mt-3 line-clamp-2">
        {% if s.description %}
          {{ s.description }}
        {% else %}
          Spot de pesca monitorado com dados de vento, ondas, maré e temperatura.
        {% endif %}
      </p>

      <!-- CTA -->
      <div class="mt-4 flex items-center justify-between text-sm">
        <span class="text-zinc-500">
          {{ s.latitude }}, {{ s.longitude }}
        </span>
        <span class="text-zinc-300 group-hover:text-white transition">
          Ver detalhes →
        </span>
      </div>

    </a>
  {% empty %}
    <div class="rounded-2xl border border-zinc-800 bg-zinc-900/40 p-6 text-zinc-400">
      Nenhum spot encontrado.
    </div>
  {% endfor %}
</div>

<style>
  .line-clamp-2{
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>

{% endblock %}
